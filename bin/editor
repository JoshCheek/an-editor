#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../lib', __dir__)
require 'editor'
require 'io/console'

editor = Editor.new argv: ARGV, stdin: $stdin, stdout: $stdout

$stdin.raw do
  editor.run
  begin
    editor.process while editor.running?
  ensure
    editor.finish
  end
end
